<p-toast></p-toast>
<div class="form-container">

  <div class="rotas-info-container">

    <!-- Tabela -->
    <div class="rotas-container">
      <label>Escolha a rota:</label>

      <p-table
        [value]="rotas"
        selectionMode="single"
        [(selection)]="rotaSelecionado"
        dataKey="id"
        [paginator]="true"
        [rows]="5"
        [rowsPerPageOptions]="[5,10,20]"
        class="w-full">

        <ng-template pTemplate="header">
          <tr>
            <th>Nome</th>
            <th>Distância</th>
            <th>Tipo de Resíduo</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rota>
          <tr [pSelectableRow]="rota">
            <td>{{ rota.nome }}</td>
            <td>{{ rota.distancia_total }} km</td>
            <td>{{ rota.tiposResiduos }}</td>
          </tr>
        </ng-template>

      </p-table>
    </div>

    <!-- Card -->
    <p-card header="Informações da Rota" class="info-card">
      <div class="mb-2"><strong>Nome da Rota:</strong> {{ rotaSelecionado?.nome }}</div>
      <div class="mb-2"><strong>Caminhao:</strong>
        <p-chip [label]="getCaminhao(rotaSelecionado?.caminhao)"></p-chip>
      </div>
      <div class="mb-2"><strong>Resíduo:</strong> {{ rotaSelecionado?.tiposResiduos }}</div>
      <div class="mb-2"><strong>Bairros:</strong>
        <p-chip *ngFor="let id of rotaSelecionado?.bairros" [label]="getNomeBairro(id)"></p-chip>
      </div>
    </p-card>

  </div>

  <!-- Calendário -->
  <div class="calendar-sm">
    <full-calendar [options]="calendarOptions"></full-calendar>
  </div>

  <div class="actions">
    <button pButton label="Cadastrar" (click)="cadastrar()" [disabled]="carregando()"></button>
  </div>

</div>
