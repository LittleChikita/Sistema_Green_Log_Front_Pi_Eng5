<p-toast></p-toast>
<div class="form-container">

  <div class="form-section">
    <label>Escolha o tipo de residuo</label>
    <p-select
      [options]="residuos"
      [(ngModel)]="residuoSelecionado"
      optionLabel="nome"
      placeholder="Selecione um tipo de resíduo"
      class="w-full"
      (onChange)="aoMudarResiduo()"
    ></p-select>
  </div>

  <div class="form-section">
    <label for="nome">Nome da Rota:</label>
    <input pInputText id="nome" [(ngModel)]="rota.nome" placeholder=""/>
  </div>

  <div class="form-section">
    <label>Caminhão:</label>
    <p-autocomplete
      [(ngModel)]="caminhaoSelecionado"
      [suggestions]="caminhoesFiltrados"
      (completeMethod)="filtrarCaminhoes()"
      optionLabel="placa"
      [dropdown]="true"
      placeholder="Selecione um caminhão"
      class="w-full"
      [disabled]="!residuoSelecionado">
    </p-autocomplete>
  </div>

  <p-table
    [value]="pontosFiltrados"
    [(selection)]="pontosSelecionados"
    dataKey="id"
    selectionMode="multiple"
    [paginator]="true"
    [rows]="10"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3em">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th>Ponto de Coleta</th>
        <th>Bairro</th>
        <th>Tipos de Resíduo</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-ponto>
      <tr [pSelectableRow]="ponto">
        <td><p-tableCheckbox [value]="ponto"></p-tableCheckbox></td>
        <td>{{ ponto.nome }}</td>
        <td>{{ ponto.bairro.nome }}</td>
        <td>{{ ponto.tiposResiduos.join(', ') }}</td>
      </tr>
    </ng-template>
  </p-table>


  <div class="actions">
    <button pButton label="Cadastrar" (click)="cadastrar()" [disabled]="carregando()"></button>
  </div>

</div>
