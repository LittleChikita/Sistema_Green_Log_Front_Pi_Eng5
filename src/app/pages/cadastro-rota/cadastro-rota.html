<p-toast></p-toast>
<div class="form-grid">

  <div class="form-row">
    <p-select
      [options]="residuos"
      [(ngModel)]="residuoSelecionado"
      optionLabel="nome"
      placeholder="Selecione um tipo de resíduo"
      class="w-full"
      (onChange)="filtrarPontos()"
    ></p-select>
  </div>

  <p-table
    [value]="pontosFiltrados"
    [(selection)]="pontosSelecionados"
    dataKey="id"
    selectionMode="multiple"
    [paginator]="true"
    [rows]="10"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3em">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th>Ponto de Coleta</th>
        <th>Bairro</th>
        <th>Tipos de Resíduo</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-ponto>
      <tr [pSelectableRow]="ponto">
        <td><p-tableCheckbox [value]="ponto"></p-tableCheckbox></td>
        <td>{{ ponto.nome }}</td>
        <td>{{ ponto.bairro.nome }}</td>
        <td>{{ ponto.tiposResiduos.join(', ') }}</td>
      </tr>
    </ng-template>
  </p-table>


  <div class="actions">
    <button pButton label="Cadastrar" (click)="cadastrar()" [disabled]="carregando()"></button>
    <button pButton label="Gerar Rota" (click)="gerarRota()"></button>
  </div>

</div>
